@model IEnumerable<Story>
@{
	Layout = null;
}

<!DOCTYPE html>

<html>
<head>
	<meta name="viewport" content="width=device-width" />
	<title>Stories</title>
</head>
<body>
	@foreach (Story s in Model)
	{
	<div>
		@s.Title <br />
		@s.Date <br />
		@s.UserStory <br />
		@if (s.Ratings.Count > 0)
		{
			<p>@s.AverageRating() / 5</p>
		}
		<p>Comments:</p>
		@foreach (StoryReview r in s.Reviews)
		{
			if (r.Comment.Length > 0)
			{
			<p>@r.Comment</p>
			}
		}

		<a asp-action="ReviewStory" asp-route-title="@s.Title">Rate and Comment</a>
	</div>
	}
	<a href="~/story/submitstory">Submit a story</a> <br />
	<a href="~/">Home</a>
	<a href="~/home/history">Biography</a>
	<a href="~/sources">Sources</a>
</body>
</html>